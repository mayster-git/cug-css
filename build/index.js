(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{function e(){return e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.apply(this,arguments)}const t=window.wp.element,n=window.lodash,r=window.wp.i18n,c=(window.wp.blocks,window.wp.components),o=window.wp.compose,i=window.wp.blockEditor,s=window.wp.hooks;function l(e){const{setText:n,getText:c,editorId:o}=e;return(0,t.useEffect)((()=>{wp.CodeMirror(document.getElementById(o),{value:c(),mode:"text/css",styleActiveLine:!0,styleActiveSelected:!0,autoCloseBrackets:!0,continueComments:!0,lineNumbers:!0,lineWrapping:!0,matchBrackets:!0}).on("change",(e=>{let t=e.getValue().replace(/^\s+|\s+$/g,"");n(t)}))}),[]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("p",null,(0,r.__)("Add your custom CSS.","cug-css")),(0,t.createElement)("div",{id:o,className:o}))}window.wp.data,(0,s.addFilter)("blocks.registerBlockType","cug/css/add-attributes",(function(e){return e.attributes=(0,n.assign)(e.attributes,{cugCSS:{type:"object",default:""}}),e}));const a=(0,o.createHigherOrderComponent)((e=>n=>{const{attributes:o,setAttributes:s}=n;return n.isSelected?(0,t.createElement)(t.Fragment,null,(0,t.createElement)(e,n),(0,t.createElement)(i.InspectorControls,null,(0,t.createElement)(c.PanelBody,{title:(0,r.__)("CuG CSS","cug-css"),initialOpen:!1},(0,t.createElement)(l,{setAttributes:s,attributes:o,editorId:"cug-css-cm-editor",setText:function(e){s({cugCSS:e})},getText:function(){var e;return null!==(e=o.cugCSS)&&void 0!==e?e:""}})))):(0,t.createElement)(e,n)}),"withInspectorControls");(0,s.addFilter)("editor.BlockEdit","ancug/css/with-inspector-controls",a);const u=(0,o.createHigherOrderComponent)((n=>r=>{const{attributes:c,clientId:o}=r,{cugCSS:i}=c;let s="cug-css-",l=document,a=document.getElementsByTagName("iFrame");for(let e=0;e<a.length;e++)if("editor-canvas"==a[e].getAttribute("name")){l=a[e].contentWindow.document;break}if(i){let e=l.getElementById(s+o);e||(e=l.createElement("style"),e.setAttribute("id",s+o),e.type="text/css",l.body.appendChild(e)),e.textContent=i.replace(/\bTHIS\b/g,"."+s+o)}else{let e=l.getElementById(s+o);e&&e.parentNode.removeChild(e)}return i?(0,t.createElement)(n,e({},r,{className:s+o})):(0,t.createElement)(n,r)}),"withClientIdClassName");wp.hooks.addFilter("editor.BlockListBlock","ancug/css/with-class-name",u)})(),e.p})();